<!DOCTYPE html>
<html>
  <head>
    <title>CRUD Básico</title>
  </head>
  <body>
    <h1>CRUD Básico</h1>

    <div id="records"></div>

    <button onclick="loadRecords()">Cargar Registros</button>
    <button onclick="addRecord()">Añadir Registro</button>

    <script>
      const scriptUrl = 'https://script.google.com/macros/s/AKfycbz5ojIT1EPc6vcWwa0ea5bWZOSxsHj7UB87v4KTZ7qImGkYZDDLyNxi5uhnyl7Voy9-/exec';

      function loadRecords() {
        fetch(scriptUrl + '?action=get')
          .then(response => response.json())
          .then(records => {
            let html = '<ul>';
            records.forEach((record, index) => {
              html += `<li>${record.Column1} - ${record.Column2} - ${record.Column3} <button onclick="editRecord(${index})">Editar</button> <button onclick="deleteRecord(${index})">Eliminar</button></li>`;
            });
            html += '</ul>';
            document.getElementById('records').innerHTML = html;
          });
      }

      function editRecord(index) {
        const newColumn1 = prompt("Nuevo valor para Column1:");
        const newColumn2 = prompt("Nuevo valor para Column2:");
        const newColumn3 = prompt("Nuevo valor para Column3:");

        fetch(scriptUrl, {
          method: 'POST',
          body: JSON.stringify({
            action: 'edit',
            index: index,
            record: {Column1: newColumn1, Column2: newColumn2, Column3: newColumn3}
          })
        }).then(response => response.json())
          .then(() => loadRecords());
      }

      function deleteRecord(index) {
        fetch(scriptUrl, {
          method: 'POST',
          body: JSON.stringify({action: 'delete', index: index})
        }).then(response => response.json())
          .then(() => loadRecords());
      }

      function addRecord() {
        const newColumn1 = prompt("Valor para Column1:");
        const newColumn2 = prompt("Valor para Column2:");
        const newColumn3 = prompt("Valor para Column3:");

        fetch(scriptUrl, {
          method: 'POST',
          body: JSON.stringify({
            action: 'add',
            record: {Column1: newColumn1, Column2: newColumn2, Column3: newColumn3}
          })
        }).then(response => response.json())
          .then(() => loadRecords());
      }
    </script>
  </body>
</html>
